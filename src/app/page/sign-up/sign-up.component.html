<app-toast #toast></app-toast>
<ul ngbNav #nav="ngbNav" [(activeId)]="active" class="nav-tabs">
	<li class="w-50pct" [ngbNavItem]="1">
		<button class="nav-buttons" ngbNavLink>Industry Supervisor</button>
		<ng-template ngbNavContent>
      <app-alert #industryAlert></app-alert>
      <form [formGroup]="industrySvFormGroup" (ngSubmit)="onSubmitIndustryForm()">
        <div class="row g-2 py-1">
          <div class="col-lg-6 col-12">
            <label for="supervisorName" class="form-label mb-1">Full name</label>
            <input oninput="this.value = this.value.toUpperCase()" type="text" class="form-control form-control-sm" formControlName="supervisorName" id="supervisorName" [ngClass]="{'is-invalid': appUtilityService.checkFormGroupValid(industrySvFormGroup, 'supervisorName', 'required', submitIndustryStatus)}">
            <div *ngIf="appUtilityService.checkFormGroupSubmitted(industrySvFormGroup, 'supervisorName', submitIndustryStatus)" class="form-label-error w-100 mt-1">
              <span *ngIf="appUtilityService.checkFormGroupHasError(industrySvFormGroup, 'supervisorName', 'required')">Name is required</span>
            </div>
          </div>
          <div class="col-lg-6 col-12">
            <label for="supervisorPassword" class="form-label mb-1">Password</label>
            <input type="text" class="form-control form-control-sm" formControlName="supervisorPassword" id="supervisorPassword" [ngClass]="{'is-invalid': appUtilityService.checkFormGroupValid(industrySvFormGroup, 'supervisorPassword', 'required', submitIndustryStatus)}">
            <div *ngIf="appUtilityService.checkFormGroupSubmitted(industrySvFormGroup, 'supervisorPassword', submitIndustryStatus)" class="form-label-error w-100 mt-1">
              <span *ngIf="appUtilityService.checkFormGroupHasError(industrySvFormGroup, 'supervisorPassword', 'required')">Password is required</span>
            </div>
          </div>
        </div>
        <div class="row g-2 py-1">
          <div class="col-lg-6 col-12">
            <label for="supervisorEmail" class="form-label mb-1">Email</label>
            <input type="text" class="form-control form-control-sm" formControlName="supervisorEmail" id="supervisorEmail" [ngClass]="{'is-invalid': appUtilityService.checkFormGroupValid(industrySvFormGroup, 'supervisorEmail', 'required', submitIndustryStatus) || appUtilityService.checkFormGroupValid(industrySvFormGroup, 'supervisorEmail', 'email', submitIndustryStatus)}">
            <div *ngIf="appUtilityService.checkFormGroupSubmitted(industrySvFormGroup, 'supervisorEmail', submitIndustryStatus)" class="form-label-error w-100 mt-1">
              <span *ngIf="appUtilityService.checkFormGroupHasError(industrySvFormGroup, 'supervisorEmail', 'required')">Email is required</span>
              <span *ngIf="appUtilityService.checkFormGroupHasError(industrySvFormGroup, 'supervisorEmail', 'email')">Invalid email pattern</span>
            </div>
          </div>
          <div class="col-lg-6 col-12">
            <label for="supervisorPhone" class="form-label mb-1">Phone number</label>
            <input type="text" class="form-control form-control-sm" formControlName="supervisorPhone" id="supervisorPhone" [ngClass]="{'is-invalid': appUtilityService.checkFormGroupValid(industrySvFormGroup, 'supervisorPhone', 'required', submitIndustryStatus)}">
            <div *ngIf="appUtilityService.checkFormGroupSubmitted(industrySvFormGroup, 'supervisorPhone', submitIndustryStatus)" class="form-label-error w-100 mt-1">
              <span *ngIf="appUtilityService.checkFormGroupHasError(industrySvFormGroup, 'supervisorPhone', 'required')">Phone number is required</span>
            </div>
          </div>
        </div>
        <div class="row g-2 py-1">
          <div class="col-lg-6 col-12">
            <label for="supervisorGender" class="form-label mb-1">Gender</label>
            <select class="form-select form-select-sm" formControlName="supervisorGender" id="supervisorGender" [ngClass]="{'is-invalid': appUtilityService.checkFormGroupValid(industrySvFormGroup, 'supervisorGender', 'required', submitIndustryStatus)}">
              <option value="" selected hidden></option>
              <option value="MALE">MALE</option>
              <option value="FEMALE">FEMALE</option>
            </select>
            <div *ngIf="appUtilityService.checkFormGroupSubmitted(industrySvFormGroup, 'supervisorGender', submitIndustryStatus)" class="form-label-error w-100 mt-1">
              <span *ngIf="appUtilityService.checkFormGroupHasError(industrySvFormGroup, 'supervisorGender', 'required')">Gender is required</span>
            </div>
          </div>
          <div class="col-lg-6 col-12">
            <label for="supervisorPosition" class="form-label mb-1">Position</label>
            <input oninput="this.value = this.value.toUpperCase()" type="text" class="form-control form-control-sm" formControlName="supervisorPosition" id="supervisorPosition">
          </div>
        </div>
        <div class="row g-2 py-1">
          <div class="col-lg-6 col-12">
            <label for="companyId" class="form-label mb-1">Company</label>
            <select class="form-select form-select-sm" formControlName="companyId" id="companyId">
              <option value="" selected hidden></option>
              <ng-container *ngIf="companies.length">
                <option *ngFor="let company of companies" [value]="company.companyId">{{ company.companyName }}</option>
              </ng-container>
            </select>
          </div>
          <div class="col-lg-6 col-12"></div>
        </div>
        <div class="row g-0 py-1">
          <div class="col-lg-6 col-12"></div>
          <div class="col-lg-6 col-12">
            <app-button-group class="float-end"  [btnTxt]="'Submit'" [btnIcn]="'fa-check'" [btnContentColor]="'#fff'" [btnBgClass]="'bg-primary'" [btnBorderClass]="'border-primary'"></app-button-group>
            <app-button-group (onClick)="submitIndustryStatus = false;" class="float-end me-2" [btnType]="'reset'" [btnTxt]="'Reset'" [btnIcn]="'fa-refresh'" [btnContentColor]="'#fff'" [btnBgClass]="'bg-secondary'" [btnBorderClass]="'border-secondary'"></app-button-group>
          </div>
        </div>
      </form>
    </ng-template>
	</li>
	<li class="w-50pct" [ngbNavItem]="2">
		<button class="nav-buttons" ngbNavLink>Student</button>
		<ng-template ngbNavContent>
      <app-alert #studentAlert></app-alert>
      <form [formGroup]="studentFormGroup" (ngSubmit)="onSubmitStudentForm(studentCV, studentMiniTranscript, studentCoverLetter, studentCourseOutline, studentSL)">
        <div class="row g-2 py-1">
          <div class="col-lg-6 col-12">
            <label for="studentName" class="form-label mb-1">Full name</label>
            <input oninput="this.value = this.value.toUpperCase()" type="text" class="form-control form-control-sm" formControlName="studentName" id="studentName" [ngClass]="{'is-invalid': appUtilityService.checkFormGroupValid(studentFormGroup, 'studentName', 'required', submitStudentStatus)}">
            <div *ngIf="appUtilityService.checkFormGroupSubmitted(studentFormGroup, 'studentName', submitStudentStatus)" class="form-label-error w-100 mt-1">
              <span *ngIf="appUtilityService.checkFormGroupHasError(studentFormGroup, 'studentName', 'required')">Name is required</span>
            </div>
          </div>
          <div class="col-lg-6 col-12">
            <label for="studentMatricNum" class="form-label mb-1">Matric number</label>
            <input type="number" class="form-control form-control-sm" formControlName="studentMatricNum" id="studentMatricNum" [ngClass]="{'is-invalid': appUtilityService.checkFormGroupValid(studentFormGroup, 'studentMatricNum', 'required', submitStudentStatus)}">
            <div *ngIf="appUtilityService.checkFormGroupSubmitted(studentFormGroup, 'studentMatricNum', submitStudentStatus)" class="form-label-error w-100 mt-1">
              <span *ngIf="appUtilityService.checkFormGroupHasError(studentFormGroup, 'studentMatricNum', 'required')">Matric number is required</span>
            </div>
          </div>
        </div>
        <div class="row g-2 py-1">
          <div class="col-lg-4 col-12">
            <label for="studentEmail" class="form-label mb-1">Email</label>
            <input type="text" class="form-control form-control-sm" formControlName="studentEmail" id="studentEmail" [ngClass]="{'is-invalid': appUtilityService.checkFormGroupValid(studentFormGroup, 'studentEmail', 'required', submitStudentStatus) || appUtilityService.checkFormGroupValid(studentFormGroup, 'studentEmail', 'email', submitStudentStatus)}">
            <div *ngIf="appUtilityService.checkFormGroupSubmitted(studentFormGroup, 'studentEmail', submitStudentStatus)" class="form-label-error w-100 mt-1">
              <span *ngIf="appUtilityService.checkFormGroupHasError(studentFormGroup, 'studentEmail', 'required')">Email is required</span>
              <span *ngIf="appUtilityService.checkFormGroupHasError(studentFormGroup, 'studentEmail', 'email')">Invalid email pattern</span>
            </div>
          </div>
          <div class="col-lg-4 col-12">
            <label for="studentPassword" class="form-label mb-1">Password</label>
            <input type="text" class="form-control form-control-sm" formControlName="studentPassword" id="studentPassword" [ngClass]="{'is-invalid': appUtilityService.checkFormGroupValid(studentFormGroup, 'studentPassword', 'required', submitStudentStatus)}">
            <div *ngIf="appUtilityService.checkFormGroupSubmitted(studentFormGroup, 'studentPassword', submitStudentStatus)" class="form-label-error w-100 mt-1">
              <span *ngIf="appUtilityService.checkFormGroupHasError(studentFormGroup, 'studentPassword', 'required')">Password is required</span>
            </div>
          </div>
          <div class="col-lg-4 col-12">
            <label for="studentPhone" class="form-label mb-1">Phone number</label>
            <div class="input-group input-group-sm">
              <span class="input-group-text">+60</span>
              <input type="text" class="form-control" formControlName="studentPhone" id="studentPhone" [ngClass]="{'is-invalid': appUtilityService.checkFormGroupValid(studentFormGroup, 'studentPhone', 'required', submitStudentStatus)}">
            </div>
            <div *ngIf="appUtilityService.checkFormGroupSubmitted(studentFormGroup, 'studentPhone', submitStudentStatus)" class="form-label-error w-100 mt-1">
              <span *ngIf="appUtilityService.checkFormGroupHasError(studentFormGroup, 'studentPhone', 'required')">Phone number is required</span>
            </div>
          </div>
        </div>
        <div class="row g-2 py-1">
          <div class="col-lg-4 col-12">
            <label for="studentCampus" class="form-label mb-1">Campus</label>
            <input oninput="this.value = this.value.toUpperCase()" type="text" class="form-control form-control-sm" formControlName="studentCampus" id="studentCampus" [ngClass]="{'is-invalid': appUtilityService.checkFormGroupValid(studentFormGroup, 'studentCampus', 'required', submitStudentStatus)}">
            <div *ngIf="appUtilityService.checkFormGroupSubmitted(studentFormGroup, 'studentCampus', submitStudentStatus)" class="form-label-error w-100 mt-1">
              <span *ngIf="appUtilityService.checkFormGroupHasError(studentFormGroup, 'studentCampus', 'required')">Campus is required</span>
            </div>
          </div>
          <div class="col-lg-4 col-12">
            <label for="studentCourse" class="form-label mb-1">Course</label>
            <input oninput="this.value = this.value.toUpperCase()" type="text" class="form-control form-control-sm" formControlName="studentCourse" id="studentCourse" [ngClass]="{'is-invalid': appUtilityService.checkFormGroupValid(studentFormGroup, 'studentCourse', 'required', submitStudentStatus)}">
            <div *ngIf="appUtilityService.checkFormGroupSubmitted(studentFormGroup, 'studentCourse', submitStudentStatus)" class="form-label-error w-100 mt-1">
              <span *ngIf="appUtilityService.checkFormGroupHasError(studentFormGroup, 'studentCourse', 'required')">Course is required</span>
            </div>
          </div>
          <div class="col-lg-4 col-12">
            <label for="studentClass" class="form-label mb-1">Class</label>
            <input oninput="this.value = this.value.toUpperCase()" type="text" class="form-control form-control-sm" formControlName="studentClass" id="studentClass" [ngClass]="{'is-invalid': appUtilityService.checkFormGroupValid(studentFormGroup, 'studentClass', 'required', submitStudentStatus)}">
            <div *ngIf="appUtilityService.checkFormGroupSubmitted(studentFormGroup, 'studentClass', submitStudentStatus)" class="form-label-error w-100 mt-1">
              <span *ngIf="appUtilityService.checkFormGroupHasError(studentFormGroup, 'studentClass', 'required')">Class is required</span>
            </div>
          </div>
        </div>
        <div class="row g-2 py-1">
          <div class="col-lg-12 col-12">
            <label for="studentAddress" class="form-label mb-1">Address</label>
            <textarea oninput="this.value = this.value.toUpperCase()" formControlName="studentAddress" id="studentAddress" class="form-control form-control-sm textarea-no-resize" rows="5" [ngClass]="{'is-invalid': appUtilityService.checkFormGroupValid(studentFormGroup, 'studentAddress', 'required', submitStudentStatus)}"></textarea>
            <div *ngIf="appUtilityService.checkFormGroupSubmitted(studentFormGroup, 'studentAddress', submitStudentStatus)" class="form-label-error w-100 mt-1">
              <span *ngIf="appUtilityService.checkFormGroupHasError(studentFormGroup, 'studentAddress', 'required')">Address is required</span>
            </div>
          </div>
        </div>
        <div class="row g-0 py-1">
          <div class="col-lg-3 col-12">
            <label for="studentCV" class="form-label mb-1 mt-5px">Resume</label>
          </div>
          <div class="col-lg-9 col-12">
            <div class="input-group">
              <input #studentCV type="file" class="form-control form-control-sm" formControlName="studentCV" accept="application/pdf" id="studentCV" [ngClass]="{'is-invalid': appUtilityService.checkFormGroupValid(studentFormGroup, 'studentCV', 'invalidFileType', submitStudentStatus)}">
              <button type="button" *ngIf="appUtilityService.isObjectNotEmpty(student)" [disabled]="!student.studentCV" (click)="appUtilityService.onDisplayFile(student.studentCV!)" class="input-group-text">
                <i class="fa fa-expand fw-bold"></i>
              </button>
            </div>
            <div *ngIf="appUtilityService.checkFormGroupSubmitted(studentFormGroup, 'studentCV', submitStudentStatus)" class="form-label-error w-100 mt-1">
              <span *ngIf="appUtilityService.checkFormGroupHasError(studentFormGroup, 'studentCV', 'invalidFileType')">Invalid file type</span>
            </div>
          </div>
        </div>
        <div class="row g-0 py-1">
          <div class="col-lg-3 col-12">
            <label for="studentMiniTranscript" class="form-label mt-5px">Mini Transcript</label>
          </div>
          <div class="col-lg-9 col-12">
            <div class="input-group">
              <input #studentMiniTranscript type="file" class="form-control form-control-sm" formControlName="studentMiniTranscript" accept="application/pdf" id="studentMiniTranscript" [ngClass]="{'is-invalid': appUtilityService.checkFormGroupValid(studentFormGroup, 'studentMiniTranscript', 'invalidFileType', submitStudentStatus)}">
              <button type="button" *ngIf="appUtilityService.isObjectNotEmpty(student)" [disabled]="!student.studentMiniTranscript" (click)="appUtilityService.onDisplayFile(student.studentMiniTranscript!)" class="input-group-text">
                <i class="fa fa-expand fw-bold"></i>
              </button>
            </div>
            <div *ngIf="appUtilityService.checkFormGroupSubmitted(studentFormGroup, 'studentMiniTranscript', submitStudentStatus)" class="form-label-error w-100 mt-1">
              <span *ngIf="appUtilityService.checkFormGroupHasError(studentFormGroup, 'studentMiniTranscript', 'invalidFileType')">Invalid file type</span>
            </div>
          </div>
        </div>
        <div class="row g-0 py-1">
          <div class="col-lg-3 col-12">
            <label for="studentCoverLetter" class="form-label mt-5px">Cover letter</label>
          </div>
          <div class="col-lg-9 col-12">
            <div class="input-group">
              <input #studentCoverLetter type="file" class="form-control form-control-sm" formControlName="studentCoverLetter" accept="application/pdf" id="studentCoverLetter" [ngClass]="{'is-invalid': appUtilityService.checkFormGroupValid(studentFormGroup, 'studentCoverLetter', 'invalidFileType', submitStudentStatus)}">
              <button type="button" *ngIf="appUtilityService.isObjectNotEmpty(student)" [disabled]="!student.studentCoverLetter" (click)="appUtilityService.onDisplayFile(student.studentCoverLetter!)" class="input-group-text">
                <i class="fa fa-expand fw-bold"></i>
              </button>
            </div>
            <div *ngIf="appUtilityService.checkFormGroupSubmitted(studentFormGroup, 'studentCoverLetter', submitStudentStatus)" class="form-label-error w-100 mt-1">
              <span *ngIf="appUtilityService.checkFormGroupHasError(studentFormGroup, 'studentCoverLetter', 'invalidFileType')">Invalid file type</span>
            </div>
          </div>
        </div>
        <div class="row g-0 py-1">
          <div class="col-lg-3 col-12">
            <label for="studentCourseOutline" class="form-label mt-5px">Course outline</label>
          </div>
          <div class="col-lg-9 col-12">
            <div class="input-group">
              <input #studentCourseOutline type="file" class="form-control form-control-sm" formControlName="studentCourseOutline" accept="application/pdf" id="studentCourseOutline" [ngClass]="{'is-invalid': appUtilityService.checkFormGroupValid(studentFormGroup, 'studentCourseOutline', 'invalidFileType', submitStudentStatus)}">
              <button type="button" *ngIf="appUtilityService.isObjectNotEmpty(student)" [disabled]="!student.studentCourseOutline" (click)="appUtilityService.onDisplayFile(student.studentCourseOutline!)" class="input-group-text">
                <i class="fa fa-expand fw-bold"></i>
              </button>
            </div>
            <div *ngIf="appUtilityService.checkFormGroupSubmitted(studentFormGroup, 'studentCourseOutline', submitStudentStatus)" class="form-label-error w-100 mt-1">
              <span *ngIf="appUtilityService.checkFormGroupHasError(studentFormGroup, 'studentCourseOutline', 'invalidFileType')">Invalid file type</span>
            </div>
          </div>
        </div>
        <div class="row g-0 py-1">
          <div class="col-lg-3 col-12">
            <label for="studentSL" class="form-label mt-5px">SL01</label>
          </div>
          <div class="col-lg-9 col-12">
            <div class="input-group">
              <input #studentSL type="file" class="form-control form-control-sm" formControlName="studentSL" id="studentSL" accept="application/pdf" [ngClass]="{'is-invalid': appUtilityService.checkFormGroupValid(studentFormGroup, 'studentSL', 'invalidFileType', submitStudentStatus)}">
              <button type="button" *ngIf="appUtilityService.isObjectNotEmpty(student)" [disabled]="!student.studentSL" (click)="appUtilityService.onDisplayFile(student.studentSL!)" class="input-group-text">
                <i class="fa fa-expand fw-bold"></i>
              </button>
            </div>
            <div *ngIf="appUtilityService.checkFormGroupSubmitted(studentFormGroup, 'studentSL', submitStudentStatus)" class="form-label-error w-100 mt-1">
              <span *ngIf="appUtilityService.checkFormGroupHasError(studentFormGroup, 'studentSL', 'invalidFileType')">Invalid file type</span>
            </div>
          </div>
        </div>
        <div class="row g-0 py-1">
          <div class="col-lg-6 col-12"></div>
          <div class="col-lg-6 col-12">
            <app-button-group class="float-end"  [btnTxt]="'Submit'" [btnIcn]="'fa-check'" [btnContentColor]="'#fff'" [btnBgClass]="'bg-primary'" [btnBorderClass]="'border-primary'"></app-button-group>
            <app-button-group (onClick)="submitStudentStatus = false; student = {}" class="float-end me-2" [btnType]="'reset'" [btnTxt]="'Reset'" [btnIcn]="'fa-refresh'" [btnContentColor]="'#fff'" [btnBgClass]="'bg-secondary'" [btnBorderClass]="'border-secondary'"></app-button-group>
          </div>
        </div>
      </form>
    </ng-template>
	</li>
</ul>
<div [ngbNavOutlet]="nav" class="nav-content bg-white border-bottom border-start border-end p-4"></div>
<app-modal #successModal [headerDisplayStatus]="false">
  <div modal-body>
    Registration successful. Click next to proceed to login page.
  </div>
  <div modal-footer>
    <app-button-group class="m-1" (click)="successModal.close(); goPreviousPage()" [btnTxt]="'Next'" [btnIcn]="'fa-check'" [btnContentColor]="'#fff'" [btnBgClass]="'bg-success'" [btnBorderClass]="'border-success'"></app-button-group>
  </div>
</app-modal>